"# Daily Horoscope Web Application

A production-ready Flask web application that provides daily horoscope readings and cosmic tips for all zodiac signs. The application features cloud data storage with Supabase, automated daily updates, robust error handling, and a complete deployment system for VPS hosting.

## Features

- Daily horoscope readings for all 12 zodiac signs
- Personalized cosmic tips
- Automatic zodiac sign detection based on birth date
- Cloud data storage with Supabase
- Automated daily updates at 6 AM IST
- Robust error handling and fallback mechanisms
- Clean and intuitive user interface
- Comprehensive logging system

## Prerequisites

### Development Environment
- Python 3.12 or higher
- pip (Python package installer)
- Supabase account (for cloud storage)

### Production Environment
- Ubuntu/Debian VPS (recommended)
- Domain name (for production deployment)
- SSL certificate (recommended)
- Nginx
- Python 3.12 or higher
- Systemd

## Local Development Setup

1. Clone the repository:
   ```bash
   git clone https://github.com/pankajAdhikari2002/Horoscope_WebApp.git
   cd Horoscope_WebApp
   ```

2. Create and activate virtual environment:
   ```bash
   python -m venv venv
   source venv/bin/activate  # On Windows: venv\Scripts\activate
   ```

3. Install the required dependencies:
   ```bash
   pip install -r requirements.txt
   ```

4. Create environment file:
   ```bash
   cp .env.example .env
   # Edit .env with your credentials
   ```

## Configuration

### Supabase Setup (Required)
1. Create a Supabase project at [supabase.com](https://supabase.com)
2. Create a table named 'horoscopes' with the following SQL:
   ```sql
   create table horoscopes (
     id bigint generated by default as identity primary key,
     data jsonb not null,
     created_at timestamptz default timezone('utc'::text, now()) not null
   );
   ```
3. Copy your Supabase project URL and anon key
4. Create a `.env` file in the project root:
   ```bash
   SUPABASE_URL=your-supabase-project-url
   SUPABASE_KEY=your-supabase-anon-key
   ```

## Running the Application

1. Start the Flask development server:
   ```bash
   python app.py
   ```

2. Open your web browser and navigate to:
   ```
   http://127.0.0.1:5001
   ```

The application will automatically:
- Connect to Supabase for data storage
- Start the APScheduler for daily updates at 6 AM IST
- Create a local JSON backup file
- Enable debug mode for development

## Usage

1. Enter your name and date of birth on the homepage
2. Click 'Get Horoscope' to view your daily horoscope
3. Receive personalized predictions and cosmic tips

## Project Structure

### Core Application Files
- `app.py`: Main Flask application with routes and error handling
- `script.py`: Horoscope generation and scheduling logic
- `config.py`: Configuration and environment variables
- `wsgi.py`: WSGI entry point for production server

### Data Files
- `horoscope.json`: Local backup of horoscope data

### Frontend Files
- `templates/`: HTML templates
- `static/`: CSS, JavaScript, and other static files

### Configuration Files
- `.env`: Environment variables and credentials (not tracked in git)
- `.env.example`: Example environment file template
- `requirements.txt`: Python dependencies

### Deployment Files
- `deploy.sh`: Automated deployment script
- `horoscope.service`: Systemd service configuration
- `horoscope.nginx`: Nginx server configuration

## Contributing

Contributions are welcome! Please feel free to submit a Pull Request.

## License

This project is licensed under the MIT License - see the LICENSE file for details.

## Production Deployment

### VPS Deployment

1. Connect to your VPS:
   ```bash
   ssh user@your-vps-ip
   ```

2. Clone the repository:
   ```bash
   git clone https://github.com/pankajAdhikari2002/Horoscope_WebApp.git
   cd Horoscope_WebApp
   ```

3. Create a .env file:
   ```bash
   cp .env.example .env
   nano .env  # Edit with your actual credentials
   ```

4. Make the deployment script executable:
   ```bash
   chmod +x deploy.sh
   ```

5. Run the deployment script:
   ```bash
   ./deploy.sh
   ```

6. Update Nginx configuration:
   - Edit `/etc/nginx/sites-available/horoscope`
   - Replace `your-domain.com` with your actual domain

7. SSL Configuration (Optional but recommended):
   ```bash
   sudo apt-get install certbot python3-certbot-nginx
   sudo certbot --nginx -d your-domain.com
   ```

### Maintenance

- View logs:
  ```bash
  sudo journalctl -u horoscope
  ```

- Restart application:
  ```bash
  sudo systemctl restart horoscope
  ```

- Update application:
  ```bash
  cd /var/www/horoscope
  git pull
  sudo systemctl restart horoscope
  ```

## Technical Details

### Data Storage
- Primary: Supabase (PostgreSQL with JSONB)
- Backup: Local JSON file
- Automatic fallback mechanism
- Daily data synchronization

### Scheduling System
- APScheduler for automated updates
- Runs daily at 6 AM IST
- Timezone-aware using pytz
- Persistent across server restarts

### Error Handling
- Comprehensive error logging
- Graceful fallback mechanisms
- User-friendly error pages
- Development and production modes

### Production Server
- Gunicorn WSGI server
- Multiple worker processes
- Unix socket communication
- Nginx reverse proxy

### Security Features
- Environment-based configuration
- Secure credential management
- SSL/TLS support
- Production hardening

## Acknowledgments

- Flask web framework
- Supabase for cloud storage
- APScheduler for task automation
- Bootstrap for UI components" 
